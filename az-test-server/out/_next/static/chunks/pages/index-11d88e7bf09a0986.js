(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(9309)}])},9309:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return _},getInitialProps:function(){return m}});var s=n(5893),i=n(9008),a=n.n(i),r=n(2217),o=n.n(r),l=n(7294),h=n(8945),c=n(1163),u=n(802),d=n.n(u);function p(){let[t,e]=(0,l.useState)({author:"",text:""}),n=(0,c.useRouter)();function i(n){let{name:s,value:i}=n.target;return e({...t,[s]:i})}return(0,s.jsxs)("form",{onSubmit:function(e){e.preventDefault(),h.Z.post("http://localhost:2222/api/addNewPost",{post:{author:t.author,text:t.text}},{withCredentials:!0}).then(t=>n.reload(),t=>console.log(t))},className:d().AfishaForm,children:[(0,s.jsx)("input",{placeholder:"Автор",name:"author",value:t.author,onChange:i,required:!0}),(0,s.jsx)("p",{children:(0,s.jsx)("textarea",{placeholder:"Текст...",required:!0,name:"text",value:t.text,onChange:i})}),(0,s.jsx)("p",{children:(0,s.jsx)("input",{type:"submit"})})]})}function x(t){let{posts:e}=t;if(!e)return(0,s.jsx)("span",{className:d().AfishaEntities,children:"Добавьте новый пост"});let n=e.reverse().map(t=>(0,s.jsxs)("div",{className:d().PostContainer,children:[(0,s.jsx)("p",{children:(0,s.jsx)("span",{children:t.author})}),(0,s.jsx)("p",{children:(0,s.jsx)("span",{children:t.text})})]},t.text));return(0,s.jsx)("div",{className:d().AfishaEntities,children:n})}function f(t){let{posts:e}=t;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(p,{}),(0,s.jsx)(x,{posts:e})]})}let m=async()=>{await h.Z.get("http://localhost:2222/api/login",{withCredentials:!0});let t=await h.Z.get("http://localhost:2222/api/getAllPosts",{withCredentials:!0}),e=t.data||[{author:"pisa",text:"sad"}];return{props:{posts:e}}};function _(t){let{posts:e}=t;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(a(),{children:[(0,s.jsx)("title",{children:"AZ-Test: afisha"}),(0,s.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),(0,s.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,s.jsx)("main",{className:o().main,children:(0,s.jsx)("div",{className:o().HomeGrid,children:(0,s.jsx)(f,{posts:e})})})]})}},802:function(t){t.exports={AfishaForm:"Afisha_AfishaForm__x_2Vy",AfishaEntities:"Afisha_AfishaEntities__zqlvO",PostContainer:"Afisha_PostContainer__vaXqQ"}},2217:function(t){t.exports={HomeGrid:"Home_HomeGrid__myhGT"}}},function(t){t.O(0,[789,774,888,179],function(){return t(t.s=8312)}),_N_E=t.O()}]);